{"version":3,"sources":["../src/utils.js"],"names":[],"mappings":";;;;;;;;;;IAAqB,KAAK;WAAL,KAAK;0BAAL,KAAK;;;eAAL,KAAK;;8BACP,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE;AAC7C,aAAO,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,MAAM,IAAI,EAAE,CAAA,GAAI,KAAK,EAAE,KAAK,CAAC,CAAC;KACzF;;;kCAEoB,MAAM,EAAE,KAAK,EAAE;AAClC,UAAI,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AACzC,eAAO,EAAE,CAAC;OACX;;AAED,aAAO,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,GAAG,GAAG,CAAC;KAC1C;;;2BAEa,UAAU,EAAE,KAAK,EAAE;AAC/B,UAAI,UAAU,IAAI,IAAI,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;AACjD,eAAO,EAAE,CAAC;OACX;;AAED,WAAK,GAAG,KAAK,IAAI,GAAG,CAAC;;AAErB,UAAM,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,CAAC;;AAE1E,aAAO,KAAK,GAAG,OAAO,GAAG,KAAK,CAAC;KAChC;;;oCAEsB,QAAQ,EAAE,kBAAkB,EAAE,YAAY,EAAE,MAAM,EAAE;AACzE,UAAI,kBAAkB,IAAI,IAAI,EAAE;AAC9B,0BAAkB,GAAG,IAAI,CAAC;OAC3B;;AAED,UAAI,YAAY,IAAI,IAAI,EAAE;AACxB,oBAAY,GAAG,KAAK,CAAC;OACtB;;AAED,UAAM,IAAI,GAAG,EAAE,CAAC;;;;;;;AAEhB,6BAAsB,QAAQ,8HAAE;cAArB,OAAO;;AAChB,cAAI,YAAY,EAAE;AAChB,mBAAO,CAAC,MAAM,GAAG,MAAM,CAAC;WACzB;;AAED,cAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEnB,cAAI,OAAO,GAAG,IAAI,CAAC;;AAEnB,cAAI,CAAC,kBAAkB,IAAI,OAAO,CAAC,IAAI,KAAK,YAAY,EAAE;AACxD,mBAAO,GAAG,KAAK,CAAC;WACjB;;AAED,cAAI,OAAO,IAAI,OAAO,CAAC,QAAQ,EAAE;AAC/B,gBAAM,QAAQ,GAAG,KAAK,CAAC,eAAe,CAAC,OAAO,CAAC,QAAQ,EAAE,kBAAkB,EAAE,YAAY,EAAE,OAAO,CAAC,CAAC;AACpG,iBAAK,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;WAC5C;SACF;;;;;;;;;;;;;;;;AAED,aAAO,IAAI,CAAC;KACb;;;SAxDkB,KAAK;;;kBAAL,KAAK","file":"utils.js","sourcesContent":["export default class Utils {\n  static tableName(schema, prefix, quote, table) {\n    return Utils.escapedSchema(schema, quote) + Utils.escape((prefix || '') + table, quote);\n  }\n\n  static escapedSchema(schema, quote) {\n    if (schema == null || schema.length === 0) {\n      return '';\n    }\n\n    return Utils.escape(schema, quote) + '.';\n  }\n\n  static escape(identifier, quote) {\n    if (identifier == null || identifier.length === 0) {\n      return '';\n    }\n\n    quote = quote || '\"';\n\n    const escaped = identifier.replace(new RegExp(quote, 'g'), quote + quote);\n\n    return quote + escaped + quote;\n  }\n\n  static flattenElements(elements, recurseRepeatables, assignParent, parent) {\n    if (recurseRepeatables == null) {\n      recurseRepeatables = true;\n    }\n\n    if (assignParent == null) {\n      assignParent = false;\n    }\n\n    const flat = [];\n\n    for (const element of elements) {\n      if (assignParent) {\n        element.parent = parent;\n      }\n\n      flat.push(element);\n\n      let recurse = true;\n\n      if (!recurseRepeatables && element.type === 'Repeatable') {\n        recurse = false;\n      }\n\n      if (recurse && element.elements) {\n        const children = Utils.flattenElements(element.elements, recurseRepeatables, assignParent, element);\n        Array.prototype.push.apply(flat, children);\n      }\n    }\n\n    return flat;\n  }\n}\n"]}